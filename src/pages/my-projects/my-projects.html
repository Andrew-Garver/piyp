<ion-header>
  <ion-navbar
    [ngClass]="{'toolbar-pro': currentProfile && currentProfile.type === 'pro', 'toolbar-consumer': currentProfile && currentProfile.type === 'consumer'}">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      Jobs
    </ion-title>
  </ion-navbar>
  <ion-toolbar no-border-top
               [ngClass]="{'toolbar-pro': currentProfile && currentProfile.type === 'pro', 'toolbar-consumer': currentProfile && currentProfile.type === 'consumer'}">
    <ion-segment [(ngModel)]="segment">
      <ion-segment-button value="jobsListed" (click)="fetchJobData()">
        Listed
      </ion-segment-button>
      <ion-segment-button value="jobsContracted" (click)="fetchJobData()">
        Contracted
      </ion-segment-button>
      <ion-segment-button value="jobsCompleted" (click)="fetchJobData()">
        Completed
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <div [ngSwitch]="segment">
    <ion-list *ngSwitchCase="'jobsListed'">
      <div *ngFor="let job of jobsListed" (click)="viewJobDetails(job)">
        <ion-grid>
          <ion-row>
            <ion-col width-25>
              <img *ngIf="job.images.length > 0" [src]=job.images[0]>
            </ion-col>
            <ion-col width-75>
              <ion-row>
                <ion-col width-75 class="job-title">
                  <strong>{{job.request.title}}</strong>
                </ion-col>
                <ion-col width-25>
                  <span class="faded right-side">1 hr ago</span>
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col width-70>
                  <span class="faded left-side">{{job._service.name}}</span>
                </ion-col>
                <ion-col width-30>
                  <span *ngIf="!job.bids || job.bids.length < 1" class="faded right-side">Open for bids</span>
                  <span *ngIf="job.bids && job.bids.length > 0" class="faded right-side">{{job.bids.length}} bids</span>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </ion-list>

    <ion-list *ngSwitchCase="'jobsContracted'">
      <!--<button ion-item *ngFor="let job of jobsContracted" (click)="viewJobDetails(job)">{{job.request.title}}</button>-->
      <h5 class="colored-text">Looks like you don't have any contracted jobs yet!</h5>
    </ion-list>

    <ion-list *ngSwitchCase="'jobsCompleted'">
      <!--<button ion-item *ngFor="let job of jobsCompleted" (click)="viewJobDetails(job)">{{job.request.title}}</button>-->
      <h5 class="colored-text">You don't have any completed jobs yet!</h5>
    </ion-list>
  </div>
</ion-content>
